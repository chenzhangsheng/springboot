<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="springboot.dao.UserDo">
	<sql id="Base_Column_List">
		id, province_id, city_name, description
	</sql>
	<sql id="getList-Where">
		WHERE xinxiren_user.is_deleted = 0,
		<if test="@Ognl@isNotEmpty(id)">
		and xinxiren_user.id = #{id},
		</if>
		<if test="@Ognl@isNotEmpty(account)">
		and xinxiren_user.account = #{account},
		</if>
		<if test="@Ognl@isNotEmpty(phoneNumber)">
		and xinxiren_user.phone_number = #{phoneNumber},
		</if>
		<if test="@Ognl@isNotEmpty(user)">
		and xinxiren_user.user = #{user},
		</if>
		<if test="@Ognl@isNotEmpty(authorize)">
		and xinxiren_user.authorize = #{authorize},
		</if>
		<if test="@Ognl@isNotEmpty(roleName)">
			and role.name = #{roleName}
		</if>
	</sql>
	<select id="GetUserList" resultType="springboot.domain.bean.XinxirenUserBean" parameterType="springboot.common.query.XinxirenUserQuery">
		SELECT
		xinxiren_user.*,
		role.*
		FROM
		xinxiren_user LEFT JOIN user_role on xinxiren_user.id = user_role.uid JOIN role on user_role.rid = role.id
		<include refid="getList-Where"></include>
</select>

</mapper>
