<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="springboot.dao.UserRoleDo">
	<sql id="Base_Column_List">
		id, uid, rid, note,create_time,update_time,is_deleted
	</sql>
	<sql id="updateUserRole-Set">
		<if test="rid !=null and rid !=''"> rid = #{rid},</if>
		<if test="note !=null and note !=''"> note = #{note},</if>
		update_time=CURRENT_TIMESTAMP
	</sql>
	<insert id="AddUseRole" keyProperty="id" useGeneratedKeys="true" parameterType="springboot.domain.UserRole">
		insert into user_role
		(uid,rid,note,create_time,update_time,is_deleted)
		values
		(#{uid},#{rid},#{note},CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,0)

	</insert>

	<update id="updateUseRole" parameterType="springboot.domain.UserRole">
		UPDATE
		user_role set
		<include refid="updateUserRole-Set"></include>
		where is_deleted = 0
		and uid=#{uid}
	</update>

	<update id="deleteUserRole">
		UPDATE user_role SET is_deleted=1,update_time=CURRENT_TIMESTAMP WHERE is_deleted=0 and uid=#{userId}
	</update>
</mapper>
